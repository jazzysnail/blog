<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_bq7x8lbm8uk81tt9.css"/>
    <link rel="stylesheet" type="text/css" href="/blog/index.css"/>
    <!--[if lt IE 10]>
      <script src="https://as.alipayobjects.com/g/component/??console-polyfill/0.2.2/index.js,es5-shim/4.5.7/es5-shim.min.js,es5-shim/4.5.7/es5-sham.min.js,html5shiv/3.7.2/html5shiv.min.js,media-match/2.0.2/media.match.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="react-content"><div class="layout" data-reactroot="" data-reactid="1" data-react-checksum="-468348335"><div class="paper" data-reactid="2"><header class="layout-header" data-reactid="3"><div class="header-content" data-reactid="4"><div class="title" data-reactid="5"><a href="/" data-reactid="6">jazzysnail</a></div><div class="nav" data-reactid="7"><ul data-reactid="8"><li data-reactid="9"><a href="/" data-reactid="10">Journal</a></li><li data-reactid="11"><a href="/" data-reactid="12">Art</a></li><li data-reactid="13"><a href="/" data-reactid="14">JS</a></li><li data-reactid="15"><a href="/" data-reactid="16">About</a></li><li data-reactid="17"><a href="/" data-reactid="18">Findme</a></li></ul></div></div></header><div class="layout-content" data-reactid="19"><div class="post-info" data-reactid="20"><i class="mineicon mineicon-clock" data-reactid="21"></i><time data-reactid="22">2016-07-29</time><i class="mineicon mineicon-sale" data-reactid="23"></i><span class="tags" data-reactid="24"><a href="/" data-reactid="25">vue</a></span></div><h1 data-reactid="26">学习vue过程当中的易错点</h1><div class="entry-content" data-reactid="27"><article data-reactid="28"><h2 data-reactid="29"><!-- react-text: 30 -->data &amp; computed<!-- /react-text --></h2><p data-reactid="31"><!-- react-text: 32 -->这个地方我认为在使用的时候经常会出错，类似Es6的<!-- /react-text --><code data-reactid="33"><!-- react-text: 34 -->Let<!-- /react-text --></code><!-- react-text: 35 -->&amp;<!-- /react-text --><code data-reactid="36"><!-- react-text: 37 -->Const<!-- /react-text --></code><!-- react-text: 38 -->。<!-- /react-text --></p><h4 data-reactid="39"><!-- react-text: 40 -->data<!-- /react-text --></h4><p data-reactid="41"><code data-reactid="42"><!-- react-text: 43 -->data<!-- /react-text --></code><!-- react-text: 44 -->用于存放vue实例属性，通常他们是“不变”的，只根据<!-- /react-text --><strong data-reactid="45"><!-- react-text: 46 -->view<!-- /react-text --></strong><!-- react-text: 47 -->的变化而变化，或者是主动的更新<!-- /react-text --><strong data-reactid="48"><!-- react-text: 49 -->model<!-- /react-text --></strong><!-- react-text: 50 -->。<!-- /react-text --></p><pre class="language-js" data-reactid="51"><code data-reactid="52"><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 data-reactid="53"><!-- react-text: 54 -->computed<!-- /react-text --></h4><p data-reactid="55"><code data-reactid="56"><!-- react-text: 57 -->computed<!-- /react-text --></code><!-- react-text: 58 -->用于存放计算属性，通常人们希望他们根据关联属性的变化而计算自身属性的值。<!-- /react-text --></p><pre class="language-js" data-reactid="59"><code data-reactid="60"><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    b<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 data-reactid="61"><!-- react-text: 62 -->computed的getter &amp; setter<!-- /react-text --></h4><p data-reactid="63"><code data-reactid="64"><!-- react-text: 65 -->getter<!-- /react-text --></code><!-- react-text: 66 -->vue计算属性默认getter。<!-- /react-text --></p><pre class="language-js" data-reactid="67"><code data-reactid="68"><span class="token comment" spellcheck="true">// ...</span>
<span class="token comment" spellcheck="true">// 等同于上面的用法</span>
computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// getter</span>
    <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">// ...</span></code></pre><p data-reactid="69"><code data-reactid="70"><!-- react-text: 71 -->setter<!-- /react-text --></code><!-- react-text: 72 -->必要时vue提供<!-- /react-text --><code data-reactid="73"><!-- react-text: 74 -->setter<!-- /react-text --></code><!-- react-text: 75 -->方法。<!-- /react-text --></p><pre class="language-js" data-reactid="76"><code data-reactid="77"><span class="token comment" spellcheck="true">// ...</span>
computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// getter</span>
    <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">// setter</span>
    <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> newValue <span class="token operator">-</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">// ...</span></code></pre><h2 data-reactid="78"><!-- react-text: 79 -->v-if &amp; v-show<!-- /react-text --></h2><p data-reactid="80"><!-- react-text: 81 -->他们兄弟两个都是用于条件显示的。他们之间的区别就类似于css的<!-- /react-text --><code data-reactid="82"><!-- react-text: 83 -->display: none ;<!-- /react-text --></code><!-- react-text: 84 -->和<!-- /react-text --><code data-reactid="85"><!-- react-text: 86 -->visibility: hidden;<!-- /react-text --></code><!-- react-text: 87 -->对布局影响的区别。<!-- /react-text --></p><p data-reactid="88"><code data-reactid="89"><!-- react-text: 90 -->v-if<!-- /react-text --></code><!-- react-text: 91 -->选择最终是否渲染进模板的Dom中，如果Value为false，那么内容将不会被渲染进Dom。<!-- /react-text --></p><p data-reactid="92"><code data-reactid="93"><!-- react-text: 94 -->v-show<!-- /react-text --></code><!-- react-text: 95 -->会渲染进Dom但是选择是否显示，通过切换css的<!-- /react-text --><code data-reactid="96"><!-- react-text: 97 -->display:<!-- /react-text --></code><!-- react-text: 98 -->属性实现。<!-- /react-text --></p><blockquote data-reactid="99"><p data-reactid="100"><strong data-reactid="101"><!-- react-text: 102 -->举个栗子~<!-- /react-text --></strong></p></blockquote><h4 data-reactid="103"><!-- react-text: 104 -->v-if<!-- /react-text --></h4><p data-reactid="105"><!-- react-text: 106 -->当一个页面出现权限问题时，你可能不希望页面上展示本不属于该用户权限下应该看到的内容。甚至是Dom都不应该出现，这时就应当使用<!-- /react-text --><code data-reactid="107"><!-- react-text: 108 -->v-if<!-- /react-text --></code><!-- react-text: 109 -->。<!-- /react-text --></p><pre class="language-html" data-reactid="110"><code data-reactid="111"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tpl-admin<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getPermissions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>管理员可以看到<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tpl-user<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>!getPermissions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>用户可以看到<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class="language-js" data-reactid="112"><code data-reactid="113"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    getPermissions<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// 假设已经获取到相关用户信息 1:admin 0:user</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>userInfo <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 data-reactid="114"><!-- react-text: 115 -->v-show<!-- /react-text --></h4><p data-reactid="116"><!-- react-text: 117 -->另一种情况是，有一个列表，用户可以对这些列表项进行删除，但是你不希望用户从中间开始删除，而是从最下面开始删除。这时应当使用<!-- /react-text --><code data-reactid="118"><!-- react-text: 119 -->v-show<!-- /react-text --></code><!-- react-text: 120 -->，因为其他列表项其实也是带有删除这个按钮的，只是他被隐藏起来了。<!-- /react-text --></p><pre class="language-html" data-reactid="121"><code data-reactid="122"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item in list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>{{ item.text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>showDelBtn($index)<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>removeItem<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>X<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class="language-js" data-reactid="123"><code data-reactid="124"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'item1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'item2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'item3'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    showDelBtn<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lists<span class="token punctuation">.</span>length <span class="token operator">==</span> index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lists<span class="token punctuation">.</span>length <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    removeItem<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 data-reactid="125"><!-- react-text: 126 -->v-if <!-- /react-text --><strong data-reactid="127"><!-- react-text: 128 -->VS<!-- /react-text --></strong><!-- react-text: 129 --> v-show<!-- /react-text --></h4><p data-reactid="130"><!-- react-text: 131 -->在切换 <!-- /react-text --><code data-reactid="132"><!-- react-text: 133 -->v-if<!-- /react-text --></code><!-- react-text: 134 --> 块时，Vue.js 有一个局部编译/卸载过程，因为 <!-- /react-text --><code data-reactid="135"><!-- react-text: 136 -->v-if<!-- /react-text --></code><!-- react-text: 137 --> 之中的模板也可能包括数据绑定或子组件。<!-- /react-text --><code data-reactid="138"><!-- react-text: 139 -->v-if<!-- /react-text --></code><!-- react-text: 140 --> 是真实的条件渲染，因为它会确保条件块在切换当中合适地销毁与重建条件块内的事件监听器和子组件。<!-- /react-text --></p><p data-reactid="141"><code data-reactid="142"><!-- react-text: 143 -->v-if<!-- /react-text --></code><!-- react-text: 144 --> 也是惰性的：如果在初始渲染时条件为假，则什么也不做——在条件第一次变为真时才开始局部编译（编译会被缓存起来）。  <!-- /react-text --></p><p data-reactid="145"><!-- react-text: 146 -->相比之下，<!-- /react-text --><code data-reactid="147"><!-- react-text: 148 -->v-show<!-- /react-text --></code><!-- react-text: 149 --> 简单得多——元素始终被编译并保留，只是简单地基于 CSS 切换。<!-- /react-text --></p><p data-reactid="150"><!-- react-text: 151 -->一般来说，v-if 有更高的切换消耗而 <!-- /react-text --><code data-reactid="152"><!-- react-text: 153 -->v-show<!-- /react-text --></code><!-- react-text: 154 --> 有更高的初始渲染消耗。因此，如果需要频繁切换 <!-- /react-text --><code data-reactid="155"><!-- react-text: 156 -->v-show<!-- /react-text --></code><!-- react-text: 157 --> 较好，如果在运行时条件不大可能改变 <!-- /react-text --><code data-reactid="158"><!-- react-text: 159 -->v-if<!-- /react-text --></code><!-- react-text: 160 --> 较好。<!-- /react-text --></p></article></div><div class="post-footer" data-reactid="161"><a class="previous" data-reactid="162">← previous post</a><span data-reactid="163">⌘+e back to news  ⌘+enter post comment</span><a class="next" data-reactid="164">next post →</a></div></div></div><footer data-reactid="165"><span class="linkup" data-reactid="166"><a href="http://github.com/jazzysnail" target="_blank" data-reactid="167"><i class="mineicon mineicon-github" data-reactid="168"></i></a><a href="http://2017.zcool.com.cn/u/2061043" target="_blank" data-reactid="169"><i class="mineicon mineicon-zcool" data-reactid="170"></i></a></span><p data-reactid="171"><!-- react-text: 172 -->2016<!-- /react-text --><!-- react-text: 173 -->-<!-- /react-text --><!-- react-text: 174 -->2017<!-- /react-text --><!-- react-text: 175 --> leon’s blog Powered by <!-- /react-text --><a href="https://github.com/benjycui/bisheng" data-reactid="176">Bisheng</a></p></footer></div></div>
  </body>
  <script src="/blog/common.js"></script>
  <script src="/blog/index.js"></script>
</html>